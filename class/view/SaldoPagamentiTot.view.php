<?phpif (!defined("_BASE_DIR_"))    exit();include_controller('SaldoPagamenti');include_model('Polizza');class SaldoPagamentiTot{    private $ctrl;    private $anno;    private $id_soc;    /**     * @param unknown $id_soc     * @param int $anno [opz] 0 per l'anno attuale, 1 per il prossimo anno (rinnovo),     * NULL per entrambi      */    public function __construct($id_soc, $anno = NULL)    {        $this->ctrl = SaldoPagamentiCtrl::get($id_soc);        $this->anno = $anno;        $this->id_soc = $id_soc;    }    public function stampa()    {        $polizza = new Polizza('polizze_stipulate');        $array_riepilogo_polizza = $polizza->getRiepilogoPagamento($this->id_soc);        $totale_complessivo_saldato = $array_riepilogo_polizza['totale_complessivo_saldato'];        $totale_complessivo_da_saldare = $array_riepilogo_polizza['totale_complessivo_da_saldare'];        $totale_complessivo_polizza = $totale_complessivo_saldato + $totale_complessivo_da_saldare;        $tot = $this->euro($this->ctrl->getTotaleTot($this->anno) + $totale_complessivo_polizza);        $pag = $this->euro($this->ctrl->getPagatiTot($this->anno) + $totale_complessivo_saldato);        $das = $this->euro($this->ctrl->getScopertiTot($this->anno) + $totale_complessivo_da_saldare);        echo '<div class="pagamenti-totali"><div class="row-fluid">';        echo '<div class="span6 tab-label">Totale:</div><div class="span6">' . $tot . '</div>';        echo '</div><div class="row-fluid">';        echo '<div class="span6 tab-label">Saldato:</div><div class="span6">' . $pag . '</div>';        echo '</div><div class="row-fluid">';        echo '<div class="span6 tab-label">Da saldare:</div><div class="span6">' . $das . '</div>';        echo '</div></div>';    }    public function euro($num)    {        return str_replace('.', ',', sprintf('&euro; %.2f', $num));    }}